<template>
<form class="form" @submit.prevent="addProduct">
  <div class="form__control">
    <label for="name" class="form__control-label">
      <span class="form__control-label-mark"></span>
      Наименование товара
    </label>
    <input 
      id="name"
      type="text"
      class="form__control-input" 
      placeholder="Введите наименование товара"
      v-model="name"
    >
    <div class="form__control-error">Это поле является обязательным</div>
  </div>
  <div class="form__control">
    <label for="description" class="form__control-label">
      Описание товара
    </label>
    <textarea
      id="description"
      type="text"
      class="form__control-textarea" 
      placeholder="Введите описание товара"
      v-model="description"
    ></textarea>
  </div>
  <div class="form__control">
    <label for="image" class="form__control-label">
      <span class="form__control-label-mark"></span>
      Ссылка на изображение товара
    </label>
    <input 
      id="image"
      type="text"
      class="form__control-input" 
      placeholder="Введите ссылку"
      v-model="image"
    >
    <div class="form__control-error">Это поле является обязательным</div>
  </div>
  <div class="form__control">
    <label for="price" class="form__control-label">
      <span class="form__control-label-mark"></span>
      Цена товара
    </label>
    <input 
      id="price"
      type="text"
      class="form__control-input" 
      placeholder="Введите цену"
      v-model="price"
    >
    <div class="form__control-error">Это поле является обязательным</div>
  </div>
  <button class="form__button" :disabled="isDisabled">Добавить товар</button>
</form>
</template>

<script>
import {ref, computed} from 'vue'
export default {
  emits: ['add-product'],
  setup(_, context) {
    const name = ref('')
    const description = ref('')
    const image = ref('')
    const price = ref('')
    const isDisabled = computed(() => !name.value || !image.value || !price.value)

    const addProduct = (event) => {
      context.emit('add-product', {
        name: name.value,
        description: description.value,
        image: image.value,
        price: price.value
      })
      // Сброс полей формы. 
      name.value = ''
      description.value = ''
      image.value = ''
      price.value = ''
      // Стилизация удачного добавления товара
      event.target.classList.add('form_primary')
      setTimeout(() => event.target.classList.remove('form_primary'), 1500)
    }
    
    return {
      name, description, image, price,
      addProduct,
      isDisabled
    }
  }
}
</script>

<style scoped lang="scss">
.form {
  padding: 24px;
  border-radius: 4px;
  background: rgba(255, 254, 251, 1);
  box-shadow: 0px 20px 30px rgba(0, 0, 0, 0.04), 0px 6px 10px rgba(0, 0, 0, 0.02);

  &_primary {
    outline: 2px solid rgba(123, 174, 115, 1);
  }

  &__control {
    width: 100%;

    &-label {
      position: relative;
      display: inline-block;
      margin-bottom: 4px;
      font-size: 10px;
      line-height: 13px;
      letter-spacing: -0.02em;
      color: rgba(73, 72, 94, 1);

      &-mark {
        position: absolute;
        top: 0;
        left: 100%;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: rgba(255, 132, 132, 1);
      }
    }

    &-input {
      width: 100%;
      height: 36px;
      margin-bottom: 4px;
      padding: 10px 16px 11px 16px;
      border-radius: 4px;
      box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
      font-size: 12px;
      color: rgba(63, 63, 63, 1);
      &:focus {
        border: 1px solid rgba(255, 132, 132, 1);
      }
      &:focus + .form__control-error {
        opacity: 1;
      }
    }

    &-error {
      margin-bottom: 2px;
      opacity: 0;
      font-size: 8px;
      line-height: 10px;
      letter-spacing: -0.02em;
      color: rgba(255, 132, 132, 1);
    }

    &-textarea {
      width: 100%;
      height: 108px;
      padding: 10px 16px 11px 16px;
      margin-bottom: 16px;
      border-radius: 4px;
      box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
      font-size: 12px;
      color: rgba(63, 63, 63, 1);
      resize: none;
    }
  }

  &__button {
    width: 100%;
    height: 36px;
    margin-top: 8px;
    padding: 10px 0 11px 0;
    border-radius: 10px;
    font-size: 12px;
    line-height: 15px;
    letter-spacing: -0.02em;
    font-weight: 600;
    background: rgba(123, 174, 115, 1);
    color: rgba(255, 255, 255, 1);
    cursor: url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.6105 3.16869C18.2188 3.39484 17.893 3.69191 17.6391 4.03433C16.6265 3.23149 15.1905 3.07695 14.012 3.75741C13.5742 4.01017 13.2183 4.35148 12.9536 4.74591C11.966 4.11467 10.673 4.03843 9.59528 4.66065C9.2785 4.84355 9.0055 5.0732 8.77801 5.33555L6.98681 2.23311C6.08983 0.679271 4.10444 0.139874 2.56111 1.03092C1.01796 1.92185 0.492493 3.91089 1.38957 5.46468L7.83499 16.6285L4.48793 15.4862C4.46474 15.4785 4.44143 15.4713 4.41793 15.4651C3.5829 15.2411 2.70898 15.3541 1.95714 15.7833C1.95228 15.7861 1.94771 15.7888 1.94286 15.7916C1.19489 16.2234 0.661344 16.9165 0.439726 17.7448C0.0487514 19.2048 0.790845 20.6084 2.47644 21.5961C4.65774 22.8735 6.87058 23.9879 8.82315 24.9712C10.25 25.6899 11.5979 26.3686 12.6436 26.9694C13.5507 27.491 16.2252 29.337 16.2523 29.3555C16.5996 29.5956 17.0542 29.6139 17.4196 29.4029L29.3884 22.4928C29.7996 22.2553 30.0104 21.7799 29.9107 21.316C29.7331 20.493 28.138 13.2078 26.7658 10.8309L23.0363 4.37121C22.1388 2.81716 20.1536 2.27775 18.6105 3.16869ZM19.3325 6.50947C19.0379 5.99925 19.2044 5.34976 19.7034 5.06165C20.2027 4.77338 20.8484 4.95397 21.143 5.46419L24.8725 11.9239C25.7844 13.5034 27.0221 18.4507 27.6011 21.0005L16.9235 27.1651C16.0596 26.5751 14.4506 25.487 13.7327 25.0743C12.6347 24.4432 11.2608 23.7514 9.80615 23.0187C7.88272 22.0503 5.70273 20.9523 3.58117 19.7101C3.02717 19.3854 2.39894 18.8791 2.5514 18.31C2.62229 18.0443 2.79799 17.8254 3.04095 17.6817C3.28024 17.5451 3.55658 17.5055 3.82251 17.569L9.88418 19.6373C10.3151 19.7846 10.7925 19.6486 11.0814 19.2971C11.3707 18.9452 11.4113 18.4508 11.1837 18.0565L3.28272 4.37167C2.9882 3.86155 3.15486 3.21219 3.65416 2.92392C4.15355 2.6356 4.79933 2.81589 5.09385 3.32601L10.1961 12.1634C10.4979 12.6861 11.1665 12.8652 11.6891 12.5635C12.2118 12.2617 12.391 11.5932 12.0892 11.0705L10.317 8.00097C10.0227 7.49112 10.1893 6.84191 10.6884 6.55375C11.1877 6.26548 11.8332 6.44579 12.1276 6.95563L14.6125 11.2597C14.9145 11.7827 15.5829 11.9616 16.1055 11.6599C16.6282 11.3581 16.8076 10.6898 16.5056 10.1668L14.7338 7.098C14.4393 6.58787 14.6058 5.93848 15.105 5.65032C15.6043 5.36199 16.2502 5.54238 16.5447 6.0525L19.0298 10.3569C19.3316 10.8795 20.0002 11.0588 20.5229 10.757C21.0457 10.4552 21.2247 9.78647 20.923 9.26385L19.3325 6.50947Z' fill='black'/%3E%3Cpath d='M18.6105 3.16869C18.2188 3.39484 17.893 3.69191 17.6391 4.03433C16.6265 3.23149 15.1905 3.07695 14.012 3.75741C13.5742 4.01017 13.2183 4.35148 12.9536 4.74591C11.966 4.11467 10.673 4.03843 9.59528 4.66065C9.2785 4.84355 9.0055 5.0732 8.77801 5.33555L6.98681 2.23311C6.08983 0.679271 4.10444 0.139874 2.56111 1.03092C1.01796 1.92185 0.492493 3.91089 1.38957 5.46468L7.83499 16.6285L4.48793 15.4862C4.46474 15.4785 4.44143 15.4713 4.41793 15.4651C3.5829 15.2411 2.70898 15.3541 1.95714 15.7833C1.95228 15.7861 1.94771 15.7888 1.94286 15.7916C1.19489 16.2234 0.661344 16.9165 0.439726 17.7448C0.0487514 19.2048 0.790845 20.6084 2.47644 21.5961C4.65774 22.8735 6.87058 23.9879 8.82315 24.9712C10.25 25.6899 11.5979 26.3686 12.6436 26.9694C13.5507 27.491 16.2252 29.337 16.2523 29.3555C16.5996 29.5956 17.0542 29.6139 17.4196 29.4029L29.3884 22.4928C29.7996 22.2553 30.0104 21.7799 29.9107 21.316C29.7331 20.493 28.138 13.2078 26.7658 10.8309L23.0363 4.37121C22.1388 2.81716 20.1536 2.27775 18.6105 3.16869ZM19.3325 6.50947C19.0379 5.99925 19.2044 5.34976 19.7034 5.06165C20.2027 4.77338 20.8484 4.95397 21.143 5.46419L24.8725 11.9239C25.7844 13.5034 27.0221 18.4507 27.6011 21.0005L16.9235 27.1651C16.0596 26.5751 14.4506 25.487 13.7327 25.0743C12.6347 24.4432 11.2608 23.7514 9.80615 23.0187C7.88272 22.0503 5.70273 20.9523 3.58117 19.7101C3.02717 19.3854 2.39894 18.8791 2.5514 18.31C2.62229 18.0443 2.79799 17.8254 3.04095 17.6817C3.28024 17.5451 3.55658 17.5055 3.82251 17.569L9.88418 19.6373C10.3151 19.7846 10.7925 19.6486 11.0814 19.2971C11.3707 18.9452 11.4113 18.4508 11.1837 18.0565L3.28272 4.37167C2.9882 3.86155 3.15486 3.21219 3.65416 2.92392C4.15355 2.6356 4.79933 2.81589 5.09385 3.32601L10.1961 12.1634C10.4979 12.6861 11.1665 12.8652 11.6891 12.5635C12.2118 12.2617 12.391 11.5932 12.0892 11.0705L10.317 8.00097C10.0227 7.49112 10.1893 6.84191 10.6884 6.55375C11.1877 6.26548 11.8332 6.44579 12.1276 6.95563L14.6125 11.2597C14.9145 11.7827 15.5829 11.9616 16.1055 11.6599C16.6282 11.3581 16.8076 10.6898 16.5056 10.1668L14.7338 7.098C14.4393 6.58787 14.6058 5.93848 15.105 5.65032C15.6043 5.36199 16.2502 5.54238 16.5447 6.0525L19.0298 10.3569C19.3316 10.8795 20.0002 11.0588 20.5229 10.757C21.0457 10.4552 21.2247 9.78647 20.923 9.26385L19.3325 6.50947Z' fill='black'/%3E%3Cpath d='M18.6105 3.16869C18.2188 3.39484 17.893 3.69191 17.6391 4.03433C16.6265 3.23149 15.1905 3.07695 14.012 3.75741C13.5742 4.01017 13.2183 4.35148 12.9536 4.74591C11.966 4.11467 10.673 4.03843 9.59528 4.66065C9.2785 4.84355 9.0055 5.0732 8.77801 5.33555L6.98681 2.23311C6.08983 0.679271 4.10444 0.139874 2.56111 1.03092C1.01796 1.92185 0.492493 3.91089 1.38957 5.46468L7.83499 16.6285L4.48793 15.4862C4.46474 15.4785 4.44143 15.4713 4.41793 15.4651C3.5829 15.2411 2.70898 15.3541 1.95714 15.7833C1.95228 15.7861 1.94771 15.7888 1.94286 15.7916C1.19489 16.2234 0.661344 16.9165 0.439726 17.7448C0.0487514 19.2048 0.790845 20.6084 2.47644 21.5961C4.65774 22.8735 6.87058 23.9879 8.82315 24.9712C10.25 25.6899 11.5979 26.3686 12.6436 26.9694C13.5507 27.491 16.2252 29.337 16.2523 29.3555C16.5996 29.5956 17.0542 29.6139 17.4196 29.4029L29.3884 22.4928C29.7996 22.2553 30.0104 21.7799 29.9107 21.316C29.7331 20.493 28.138 13.2078 26.7658 10.8309L23.0363 4.37121C22.1388 2.81716 20.1536 2.27775 18.6105 3.16869ZM19.3325 6.50947C19.0379 5.99925 19.2044 5.34976 19.7034 5.06165C20.2027 4.77338 20.8484 4.95397 21.143 5.46419L24.8725 11.9239C25.7844 13.5034 27.0221 18.4507 27.6011 21.0005L16.9235 27.1651C16.0596 26.5751 14.4506 25.487 13.7327 25.0743C12.6347 24.4432 11.2608 23.7514 9.80615 23.0187C7.88272 22.0503 5.70273 20.9523 3.58117 19.7101C3.02717 19.3854 2.39894 18.8791 2.5514 18.31C2.62229 18.0443 2.79799 17.8254 3.04095 17.6817C3.28024 17.5451 3.55658 17.5055 3.82251 17.569L9.88418 19.6373C10.3151 19.7846 10.7925 19.6486 11.0814 19.2971C11.3707 18.9452 11.4113 18.4508 11.1837 18.0565L3.28272 4.37167C2.9882 3.86155 3.15486 3.21219 3.65416 2.92392C4.15355 2.6356 4.79933 2.81589 5.09385 3.32601L10.1961 12.1634C10.4979 12.6861 11.1665 12.8652 11.6891 12.5635C12.2118 12.2617 12.391 11.5932 12.0892 11.0705L10.317 8.00097C10.0227 7.49112 10.1893 6.84191 10.6884 6.55375C11.1877 6.26548 11.8332 6.44579 12.1276 6.95563L14.6125 11.2597C14.9145 11.7827 15.5829 11.9616 16.1055 11.6599C16.6282 11.3581 16.8076 10.6898 16.5056 10.1668L14.7338 7.098C14.4393 6.58787 14.6058 5.93848 15.105 5.65032C15.6043 5.36199 16.2502 5.54238 16.5447 6.0525L19.0298 10.3569C19.3316 10.8795 20.0002 11.0588 20.5229 10.757C21.0457 10.4552 21.2247 9.78647 20.923 9.26385L19.3325 6.50947Z' fill='black'/%3E%3Cpath d='M18.6105 3.16869C18.2188 3.39484 17.893 3.69191 17.6391 4.03433C16.6265 3.23149 15.1905 3.07695 14.012 3.75741C13.5742 4.01017 13.2183 4.35148 12.9536 4.74591C11.966 4.11467 10.673 4.03843 9.59528 4.66065C9.2785 4.84355 9.0055 5.0732 8.77801 5.33555L6.98681 2.23311C6.08983 0.679271 4.10444 0.139874 2.56111 1.03092C1.01796 1.92185 0.492493 3.91089 1.38957 5.46468L7.83499 16.6285L4.48793 15.4862C4.46474 15.4785 4.44143 15.4713 4.41793 15.4651C3.5829 15.2411 2.70898 15.3541 1.95714 15.7833C1.95228 15.7861 1.94771 15.7888 1.94286 15.7916C1.19489 16.2234 0.661344 16.9165 0.439726 17.7448C0.0487514 19.2048 0.790845 20.6084 2.47644 21.5961C4.65774 22.8735 6.87058 23.9879 8.82315 24.9712C10.25 25.6899 11.5979 26.3686 12.6436 26.9694C13.5507 27.491 16.2252 29.337 16.2523 29.3555C16.5996 29.5956 17.0542 29.6139 17.4196 29.4029L29.3884 22.4928C29.7996 22.2553 30.0104 21.7799 29.9107 21.316C29.7331 20.493 28.138 13.2078 26.7658 10.8309L23.0363 4.37121C22.1388 2.81716 20.1536 2.27775 18.6105 3.16869ZM19.3325 6.50947C19.0379 5.99925 19.2044 5.34976 19.7034 5.06165C20.2027 4.77338 20.8484 4.95397 21.143 5.46419L24.8725 11.9239C25.7844 13.5034 27.0221 18.4507 27.6011 21.0005L16.9235 27.1651C16.0596 26.5751 14.4506 25.487 13.7327 25.0743C12.6347 24.4432 11.2608 23.7514 9.80615 23.0187C7.88272 22.0503 5.70273 20.9523 3.58117 19.7101C3.02717 19.3854 2.39894 18.8791 2.5514 18.31C2.62229 18.0443 2.79799 17.8254 3.04095 17.6817C3.28024 17.5451 3.55658 17.5055 3.82251 17.569L9.88418 19.6373C10.3151 19.7846 10.7925 19.6486 11.0814 19.2971C11.3707 18.9452 11.4113 18.4508 11.1837 18.0565L3.28272 4.37167C2.9882 3.86155 3.15486 3.21219 3.65416 2.92392C4.15355 2.6356 4.79933 2.81589 5.09385 3.32601L10.1961 12.1634C10.4979 12.6861 11.1665 12.8652 11.6891 12.5635C12.2118 12.2617 12.391 11.5932 12.0892 11.0705L10.317 8.00097C10.0227 7.49112 10.1893 6.84191 10.6884 6.55375C11.1877 6.26548 11.8332 6.44579 12.1276 6.95563L14.6125 11.2597C14.9145 11.7827 15.5829 11.9616 16.1055 11.6599C16.6282 11.3581 16.8076 10.6898 16.5056 10.1668L14.7338 7.098C14.4393 6.58787 14.6058 5.93848 15.105 5.65032C15.6043 5.36199 16.2502 5.54238 16.5447 6.0525L19.0298 10.3569C19.3316 10.8795 20.0002 11.0588 20.5229 10.757C21.0457 10.4552 21.2247 9.78647 20.923 9.26385L19.3325 6.50947Z' fill='black'/%3E%3C/svg%3E%0A"), pointer;
    transition: 0.5s;

    &:hover {
      transform: translateX(5px);
      background: rgb(61, 177, 43);
    }
    
    &:disabled {
      background: rgba(238, 238, 238, 1);
      color: rgba(180, 180, 180, 1);
      cursor: not-allowed;
    }
  }

  ::placeholder {
  color: rgba(180, 180, 180, 1)
  }
}
</style>